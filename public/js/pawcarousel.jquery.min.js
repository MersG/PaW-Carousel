/*
 * PaW Carousel - Version: 2.1.1
 * http://picturesandwriting.com
 * Copyright (c) 2014 Shaun Morrison; Licensed: GPL
 * Requires: jQuery v1.7 or later
 * Author: Shaun Morrison
 */
!function($){$.fn.pawCarousel=function(t){var i={carouselItemCls:"paw-carousel-item",carouselItemMediaCls:"paw-carousel-item-media",carouselItemsWrapCls:"paw-carousel-items-wrap",carouselNavItemCls:"paw-carousel-nav-item",nextLinkCls:"paw-carousel-next",prevLinkCls:"paw-carousel-prev",activeCls:"active",croppedCls:"cropped",scaledCls:"scaled",carouselItemSpace:"css",animSpeed:800,alignment:"center",setsEachSide:1,carouselHtType:"shortest",carouselResizeType:"cropped"},e=$.extend({},i,t);return this.each(function(){function t(){Ci=window.innerHeight,void 0==Ci&&(Ci=$(window).height()),gi=$(window).width()}function i(){B.find("."+U).length&&(wi=!0)}function n(){si=B.find("."+G)}function a(){si.find("iframe").addClass(K)}function s(){si.find("iframe").each(function(){var t=$(this);o(t,!0)})}function r(){ri.each(function(t){var i=$(this),e=i.find("iframe");if(e.length){var n=B.find("."+ni+t);e=n.find("iframe"),o(e)}})}function o(t,i){var e=t.attr(ai),n=Pi*e;t.attr("height",Pi),t.attr("width",n),i&&d(t,n)}function c(t,i){if(i!=zi){var e=t.find("iframe");if(e.length){var n=e.attr("src");e.attr("src",""),e.attr("src",n)}}}function d(t,i){var e='<div style="width:'+i+"px; height:"+Pi+'px" class="'+_+'"></div>';t.before(e).addClass(ti)}function l(){Pi="shortest"==Ni?9999:"longest"==Ni?0:Ni}function f(){si.addClass(Z),ri=B.find("."+Z),"css"!=e.carouselItemSpace&&ri.css({"margin-right":Ri})}function u(t){li=t,li.siblings().removeClass(V),li.addClass(V),zi=parseInt(li.attr(Qi))}function h(){u(B.find("."+G).first()),v(0),C(0)}function m(t,i){v(t,i),C()}function v(t,i){var e=li,n=zi,a=0,s=0;"forwards"==i&&n==Si?(u(ri.first()),p("last"),w(),s=-Ii*Fi,Hi=-Ii*Fi+Li):"backwards"==i&&0==n?(u(ri.last()),p("first"),g(),s=-Ii-Ii*Fi+qi[Si].itemWid,Hi=-Ii-Ii*Fi+qi[Si].itemWid+Li):(t>0&&(a=qi[t-1].itemPosFromStart),u(B.find("."+J+"."+ni+t)),p(),s=-(a+Ii*Fi),Hi=s+Li),c(e,n)}function p(t){if("center"==e.alignment){var i=xi/2;Li=i-qi[zi].itemWid/2,"first"==t?Mi=i-qi[0].itemWid/2:"last"==t&&(Ai=i-qi[Si].itemWid/2)}else"right"==e.alignment&&(Li=xi-qi[zi].itemWid,"first"==t?Mi=xi-qi[0].itemWid:"last"==t&&(Ai=xi-qi[Si].itemWid))}function w(){var t=-Ii+qi[Si].itemWid+Ai;di.css({left:t})}function g(){var t=-Ii-Ii*Fi+Mi;di.css({left:t})}function C(t){t="undefined"!=typeof t?t:$i,mi=!0,0==t?di.css({left:Hi}):di.stop(!0).animate({left:Hi},$i)}function x(){ri.each(function(){var t=$(this),i=t.find("."+K);k(t,Si+=1),I(t,i),y(t),("shortest"==Ni||"tallest"==Ni)&&H(t)})}function I(t,i){if(void 0!=i.attr("width")&&void 0!=i.attr("height"))var e=i.attr("width")/i.attr("height");else var e=t.width()/t.height();e=e.toFixed(3),i.attr(ai,e)}function k(t,i){t.attr(Qi,i),t.addClass(ni+i)}function y(t){var i=t.find("img."+K),e=i.attr("data-src-2x");if(hi&&void 0!=e)var n=e;else var n=i.attr("data-src");i.removeAttr("data-src"),i.removeAttr("data-src-2x"),i.attr("src",n)}function W(){Ei=di.html(),Ei=Ei.replace(/ paw-carousel-item-orig/g,"")}function b(){qi=[],Ii=0,("shortest"==Ni&&pi||"tallest"==Ni&&pi)&&l(),ri.each(function(t){var i=$(this);i.width("auto").removeClass(X),ki=i.width(),S(t,i,ki),T(ki),("shortest"==Ni&&pi||"tallest"==Ni&&pi)&&H(i)})}function S(t,i,e){var n=B.find("."+ni+t);if(e+=Ri,"cropped"==ji&&e>=xi)ki=xi,n.width(ki).addClass(X),vi=!0;else if(e>=xi){ki=xi,n.width(ki).addClass(Y),pi=!0;var a=i.find("iframe")}else ki+=Ri,(vi||pi)&&n.removeAttr("style").removeClass(X)}function T(t){Ii+=t,qi.push({itemWid:t,itemPosFromStart:Ii})}function H(t){var i=t.height(),e=t.find("iframe").length;"shortest"!=Ni||e?"tallest"==Ni&&(Pi=i>Pi?i:Pi):Pi=Pi>i?i:Pi}function z(){"shortest"==Ni||"tallest"==Ni?(di.height(Pi),B.height(Pi)):(di.height(Ni),B.height(Ni))}function L(t){"before"==t?di.prepend(Ei):di.append(Ei),bi++,D()}function M(){"css"==Ri&&(Ri=parseInt(si.first().css("margin-right"),10))}function A(){if(window.matchMedia){var t=window.matchMedia("only screen and (min--moz-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen  and (min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx)");hi=t&&t.matches||window.devicePixelRatio>1?!0:!1}}function D(){Wi=Ii*bi,di.width(Wi)}function F(){xi=B.width(),yi=Pi}function P(){U.length&&(R(),oi.on("click",function(t){t.preventDefault(),$link=$(this);var i=$link.attr(Qi);zi!=i&&(wi&&E($link),m(i))}))}function R(){oi.each(function(t){$(this).attr(Qi,t),0==t&&wi&&E($(this))})}function E(t){t.siblings().removeClass(V),t.addClass(V),ci=t}function N(){fi.on("click",function(t){t.preventDefault(),j()}),ui.on("click",function(t){t.preventDefault(),Q()})}function j(){var t=zi+1;wi&&E(ci.next()),t>Si&&(t=0,wi&&E(oi.first())),m(t,"forwards")}function Q(){var t=zi-1;wi&&E(ci.prev()),0>t&&(t=Si,wi&&E(oi.last())),m(t,"backwards")}function q(){var t=si.find("img."+K),i=t.length;t.load(function(){Di++,Di==i&&setTimeout(function(){li.addClass(ii),setTimeout(function(){si.addClass(ii)},800)},500)})}var B=$(this),G=e.carouselItemCls,J=e.carouselItemCls+"-orig",K=e.carouselItemMediaCls,O=e.carouselItemsWrapCls,U=e.carouselNavItemCls,V=e.activeCls,X=e.croppedCls,Y=e.scaledCls,Z="paw-carousel-item-orig",_="paw-carousel-item-vid-foundation",ti="paw-carousel-item-vid",ii="paw-carousel-item-visible",ei="paw-carousel-crop-comp",ni=G+"-",ai="data-paw-orig-ratio",si=B.find("."+G),ri,oi=B.next().find("."+U),ci,di=B.children("."+O),li,fi=B.find("."+e.nextLinkCls),ui=B.find("."+e.prevLinkCls),hi=!1,mi=!1,vi=!1,pi=!1,wi=!1,gi,Ci,xi=0,Ii=0,ki=0,yi=0,Wi=0,bi=1,Si=-1,Ti=0,Hi=0,zi=0,Li=0,Mi=0,Ai=0,Di=0,Fi=e.setsEachSide,Pi=0,Ri=e.carouselItemSpace,$i=e.animSpeed,Ei,Ni=e.carouselHtType,ji=e.carouselResizeType,Qi="data-paw-item-num",qi=[];t(),A(),M(),i(),l(),a(),f(),x(),F(),s(),b(),r(),W();for(var Bi=0;Fi>Bi;Bi++)L("before"),L("after");n(),z(),h(),P(),N(),q();var Gi=function(){$(window).one("resize",function(){var i=window.innerHeight?window.innerHeight:$(window).height(),e=$(window).width();(e!=gi||i!=Ci)&&(t(),F(),b(),r(),z(),D(),v(zi),C(0)),setTimeout(Gi,100)})};Gi()}),this}}(jQuery);